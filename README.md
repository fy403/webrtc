# é¢å‘ä½å»¶æ—¶ï¼Œç‚¹å¯¹ç‚¹ã€è¿œç¨‹éŸ³è§†é¢‘ä¸ä¿¡å·æ§åˆ¶çš„è¿œè·ç¦»é¥æ§è½¦ç³»ç»Ÿ

![License](https://img.shields.io/badge/license-MIT-yellow) ![Language](https://img.shields.io/badge/language-C++-blue) ![Language](https://img.shields.io/badge/language-HTML-blue)

![WebRTC](https://img.shields.io/badge/WebRTC-4682B4)![P2P](https://img.shields.io/badge/P2P-FF6347)![Linux](https://img.shields.io/badge/Linux-5F9EA0)![C++](https://img.shields.io/badge/C++-6495ED)![HTML](https://img.shields.io/badge/HTML-6495ED)![FFmpeg](https://img.shields.io/badge/FFmpeg-8A2BE2)![H264](https://img.shields.io/badge/H264-8A2BE2)![Opus](https://img.shields.io/badge/Opus-8A2BE2)![å¤šçº¿ç¨‹](https://img.shields.io/badge/å¤šçº¿ç¨‹-8A2BE2)![RNDIS](https://img.shields.io/badge/RNDIS-8A2BE2)![USBæ‘„åƒå¤´](https://img.shields.io/badge/USBæ‘„åƒå¤´-6A5ACD)![USBéº¦å…‹é£](https://img.shields.io/badge/USBéº¦å…‹é£-7B68EE)![4Gç½‘ç»œ](https://img.shields.io/badge/4Gç½‘ç»œ-9370DB)![WIFI](https://img.shields.io/badge/WIFI-9932CC)![å¼€å‘æ¿](https://img.shields.io/badge/å¼€å‘æ¿-8B008B)![ç”µæœºé©±åŠ¨å™¨](https://img.shields.io/badge/ç”µæœºé©±åŠ¨å™¨-BA55D3)![RCé¥æ§è½¦](https://img.shields.io/badge/RCé¥æ§è½¦-FF6347)

### âŒ›æ¬¢è¿starâœ¨ä»»ä½•é—®é¢˜å‘issueğŸ‘¨â€ğŸ«æ¬¢è¿ä¸€èµ·è´¡çŒ®ä»£ç ğŸŠ[æºç åœ°å€](https://github.com/fy403/webrtc)

[TOC]

## é¡¹ç›®åˆè¡·

 **æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªä¸ªäººå­¦ä¹ æ€§è´¨çš„å¼€æºé¡¹ç›®ï¼Œæ—¨åœ¨ç³»ç»Ÿå­¦ä¹ å’Œå®è·µéŸ³è§†é¢‘å¼€å‘ç›¸å…³çŸ¥è¯†ï¼Œå¹¶ç»“åˆå®é™…ç¼–ç¨‹è¯­è¨€æé«˜åŠ¨æ‰‹èƒ½åŠ›ã€‚åœ¨æ•´ä¸ªç³»ç»Ÿè®¾è®¡ä¸å®ç°è¿‡ç¨‹ä¸­ï¼Œæ³¨é‡ä»£ç çš„å¯æ‰©å±•æ€§ï¼Œæ¯ä¸ªåŠŸèƒ½æ¨¡å—éƒ½å°½é‡ä»¥ç‹¬ç«‹å‡½æ•°åº“çš„å½¢å¼å‘ˆç°ï¼Œä¾¿äºåç»­å¤ç”¨ä¸æ‹“å±•ã€‚åŒæ—¶ï¼Œåœ¨ä»£ç å®ç°ä¸Šè¿½æ±‚ç®€æ´æ¸…æ™°ï¼Œå‰”é™¤å†—ä½™é€»è¾‘ï¼Œä¸“æ³¨äºä¿ç•™æœ€æ ¸å¿ƒã€æœ€æœ¬è´¨çš„å®ç°å†…å®¹ï¼Œå¸®åŠ©ç†è§£åº•å±‚åŸç†ã€‚**

## é¡¹ç›®ä»‹ç»

**é¡¹ç›®ä¸»è¦é¢å‘RCé¥æ§è½¦æ”¹é€ ï¼Œå¸Œæœ›åœ¨é¥æ§è½¦åŸºç¡€ä¸Šå¼€å‘ä½å»¶æ—¶ã€ç‚¹å¯¹ç‚¹ã€å¯è¿œç¨‹æ§åˆ¶ã€å¯æ•è·ç”»é¢å’Œå£°éŸ³çš„é¥æ§è½¦ã€‚é‡‡ç”¨çš„æŠ€æœ¯æ–¹æ¡ˆæ˜¯é€šè¿‡RTPå°†é‡‡é›†çš„éŸ³è§†é¢‘æˆ–è€…æ˜¯ç›‘æ§æ•°æ®ä¼ è¾“åˆ°æ§åˆ¶ç«¯ï¼›å°†æ§åˆ¶ä¿¡å·ä¹Ÿé€šè¿‡RTPä¼ è¾“åˆ°è¢«æ§é¥æ§è½¦ï¼Œé¥æ§è½¦é€šè¿‡è§£æåè®®ï¼Œè½¬æ¢ä¸ºå‘½ä»¤æ§åˆ¶é¥æ§è½¦ã€‚æŠ€æœ¯æ–¹æ¡ˆå°½å¯èƒ½å‡å°‘æœåŠ¡å™¨çš„å‚ä¸ï¼Œæµé‡ç›´æ¥ç‚¹å¯¹ç‚¹ä¼ è¾“ã€‚**

## æ¼”ç¤ºæ•ˆæœ

-----------

å±å¹•OSDä¿¡æ¯ï¼›æ•°æ®é€šé“å®æ—¶æ•°æ®å˜åŒ–ï¼›è¿æ¥çŠ¶æ€æƒ…å†µï¼›å®æ—¶è§†é¢‘å‚æ•°è°ƒæ•´ã€‚

<img src="README.assets\image-20260128185224269.png" alt="image-20260128185224269" style="zoom: 54%;" />

<img src="README.assets\image-20260128185304740.png" alt="image-20260128185304740" style="zoom: 50%;" />

<img src="README.assets\image-20260128185324642.png" alt="image-20260128185324642" style="zoom:50%;" />

------
<iframe src="//player.bilibili.com/player.html?isOutside=true&aid=115489808323280&bvid=BV1VA1kBnEAx&cid=33681311377&page=1&high_quality=1&danmaku=0" allowfullscreen="allowfullscreen" width="100%" height="500" scrolling="no" frameborder="0" sandbox="allow-top-navigation allow-same-origin allow-forms allow-scripts"></iframe>

[Bç«™è§†é¢‘](https://www.bilibili.com/video/BV1VA1kBnEAx?share_source=copy_web)
-------

## é¡¹ç›®Q&A

### Q1ï¼šå¦‚æœæˆ‘ç”¨çš„ç”µæœºé©±åŠ¨æ–¹æ¡ˆä¸å­˜åœ¨æœ¬é¡¹ç›®ä¸­ï¼Œå¦‚ä½•é©±åŠ¨ç”µæœºå·¥ä½œï¼Ÿ

A1: å¯ä»¥è‡ªå·±å®ç°ç”µæœºé©±åŠ¨æ–¹æ¡ˆï¼Œæ¯”å¦‚ä½¿ç”¨PWMæ§åˆ¶ç”µæœºï¼Œæˆ–è€…ä½¿ç”¨GPIOæ§åˆ¶ç”µæœºã€‚å¦‚æœä¸ä¼šç¼–å†™ä»£ç ï¼Œå¯ä»¥ä½¿ç”¨CodeBuddyæˆ–è€…Cursorï¼Œæˆ–è€…VSCODEçš„Lingmaæ’ä»¶ï¼Œå¼€å¯Agentæ¨¡å¼ã€‚è¾“å…¥ä»¥ä¸‹æç¤ºè¯ï¼Œæ›¿æ¢æ‰`<your_method>`ä¸ºå®é™…ç”µæœºé©±åŠ¨æ–¹æ³•ã€‚

```txt
å‡å¦‚ä½ æ˜¯æœ¬é¡¹ç›®çš„C++å¼€å‘å·¥ç¨‹å¸ˆï¼Œå¸®æˆ‘æ·»åŠ ä¸€ä¸ªæ–°çš„motor_driverï¼š(<your_method>)ï¼Œä½ å¯ä»¥æŸ¥çœ‹å·²æœ‰çš„é©±åŠ¨ç¼–å†™æ¨¡æ¿ä»£ç ï¼š@include/uart_motor_driver.h @include/motor_driver.h ã€‚
é©±åŠ¨ç¼–å†™å®Œæˆåï¼Œå°†å…¶åŠ å…¥åˆ°@src/MotorControllerçš„æ„é€ å‡½æ•°ä¸­ã€‚ä½ å¯ä»¥é˜…è¯»æ•´ä½“ä»£ç ï¼Œå®ç°è¯¥åŠŸèƒ½ç¼–å†™ã€‚
```

ä¾‹å¦‚ï¼šä½¿ç”¨pwmæ§åˆ¶ç”µè°ƒï¼š

```markdown

å‡å¦‚ä½ æ˜¯æœ¬é¡¹ç›®çš„C++å¼€å‘å·¥ç¨‹å¸ˆï¼Œéœ€è¦æ–°å¢ä¸€ä¸ªç”µæœºé©±åŠ¨æ¨¡å—ã€‚è¯¥æ¨¡å—é€šè¿‡**GPIOå¼•è„š22**è¾“å‡º**PWMä¿¡å·**æ§åˆ¶**ç”µè°ƒ**ï¼Œå…¶**å·¥ä½œé¢‘ç‡**ä¸º**50Hzï¼ˆå‘¨æœŸ20msï¼‰**ã€‚

ç”µè°ƒåˆå§‹åŒ–æµç¨‹å¦‚ä¸‹ï¼š
1. å‘é€**ä¸­ç«‹ä½è„‰å†²ï¼ˆ1500Î¼sï¼‰**ï¼Œä½¿èˆµæœºå½’ä¸­ã€‚
2. ä¿æŒè¯¥ä¿¡å·**2ç§’**ï¼Œå®Œæˆç”µè°ƒæ ¡å‡†ï¼ˆæ ¡å‡†æˆåŠŸåä¼šå‘å‡º**æ»´æ»´æç¤ºéŸ³**ï¼‰ã€‚
3. æ ¡å‡†å®Œæˆåï¼Œæ§åˆ¶é‡ç¨‹ä¸º **900Î¼s è‡³ +2100Î¼s**ï¼ˆä»¥1500Î¼sä¸ºé›¶ç‚¹ï¼‰ã€‚

ä½ å¯å‚è€ƒä»¥ä¸‹ç°æœ‰é©±åŠ¨çš„ä»£ç ç»“æ„è¿›è¡Œå®ç°ï¼š
- æ¥å£å®šä¹‰ï¼š`@include/motor_driver.h`
- ç¤ºä¾‹å®ç°ï¼š`@include/uart_motor_driver.h`

é©±åŠ¨å¼€å‘å®Œæˆåï¼Œè¯·å°†å…¶é›†æˆåˆ° **`@src/MotorController` çš„æ„é€ å‡½æ•°**ä¸­ï¼Œå¹¶ç¡®ä¿ä¸ç°æœ‰ç³»ç»Ÿå…¼å®¹ã€‚å»ºè®®å…ˆç†è§£æ•´ä½“ä»£ç æ¶æ„ï¼Œå†è¿›è¡Œæ¨¡å—åŒ–å¼€å‘ã€‚
```

### Q2ï¼š:éœ€è¦å…¨éƒ¨è´­ä¹°é…ä»¶å—ï¼Ÿ

A2ï¼šä¸éœ€è¦ï¼Œæ¯ä¸ªéƒ¨åˆ†éƒ½æ˜¯éå¸¸å¼ºå¯æ‰©å±•çš„ã€‚å¼€å‘æ¿åªè¦èƒ½å¤Ÿä¸Šç½‘ï¼Œä¸”èƒ½å¤Ÿç¼–è¯‘è¿è¡Œffmpegä»¥åŠC++ä»£ç å°±è¡Œï¼Œæ— è®ºä»€ä¹ˆç³»ç»Ÿã€‚å¦‚æœåªéœ€è¦å›¾ä¼ éƒ¨åˆ†ï¼Œå¯ç”¨å•ç‹¬è¿è¡Œav_trackã€‚å¦‚æœåªéœ€è¦æ•°å­—æ§åˆ¶éƒ¨åˆ†å¯åªè¿è¡Œdata_trackã€‚ç”µæœºé©±åŠ¨å™¨æ”¯æŒä¸¤ç§é«˜å¯æ‰©å±•æ–¹æ¡ˆï¼ˆå°†æ–‡æ¡£åé¢è¯´æ˜ï¼‰ï¼Œæ”¯æŒRCé¥æ§è½¦æ— æŸè¯æ”¹é€ ã€‚

### Q3ï¼šå›¾ä¼ å»¶æ—¶æ€ä¹ˆæ ·ï¼Ÿ

A3: ç›®å‰æœ€æ–°çš„å›¾ä¼ å»¶æ—¶èƒ½å¤Ÿåœ¨å†…ç½‘ç¯å¢ƒä¸‹è¾¾åˆ°110msï¼Œä¸”æ²¡æœ‰ä½¿ç”¨ç¼–ç èŠ¯ç‰‡æ”¯æŒã€‚çº¯ä½¿ç”¨CPUçš„è½¯ç¼–ç ï¼Œå¦‚æœå¼€å‘æ¿ç¡¬ä»¶æ¯”è¾ƒå¥½ï¼Œç†è®ºå¯ä»¥é™ä½åˆ°100msä»¥ä¸‹ã€‚

-----

## å¿«é€Ÿè¿è¡Œ

### 1.ä¾èµ–å®‰è£…ï¼ˆubuntuä¸ºä¾‹ï¼‰

#### 1.1æœåŠ¡å™¨éƒ¨åˆ†ï¼šä¿¡ä»¤æœåŠ¡å™¨æ­å»ºï¼ˆè°ƒè¯•æ—¶å¯ç”¨æˆ‘æ­å»ºçš„, é»˜è®¤åŒ…å«åœ¨é…ç½®ä¸­)

ä¿¡ä»¤æœåŠ¡å™¨ä¸»è¦æ˜¯ååŠ©WebRTCåŒæ–¹äº¤æ¢SDPï¼ˆéŸ³è§†é¢‘å‚æ•°ä¿¡æ¯ï¼‰ä»¥åŠICEï¼ˆåŒæ–¹ç½‘ç»œåœ°å€ä¿¡æ¯ï¼‰ã€‚æ‰€ä»¥è¦æƒ³æ”¯æŒ4Gè¿œç¨‹ï¼Œéœ€è¦è´­ä¹°ä¸€ä¸ªä¾¿å®œçš„å»ºç«™æœåŠ¡å™¨å°±è¡Œï¼Œæˆæœ¬70/å¹´(2H2G)ã€‚æœåŠ¡å™¨éœ€è¦æœ‰å…¬ç½‘ipï¼ŒæœåŠ¡å™¨ä¸éœ€è¦å¾ˆå¤§çš„å¸¦å®½ï¼ˆä¸è´Ÿè´£ä¼ è¾“æµåª’ä½“æ•°æ®ï¼‰ã€‚

##### ä¸‹è½½é¡¹ç›®

```shel
git clone https://github.com/fy403/webrtc
```

##### ä¾èµ–å®‰è£…

æ–¹æ³•1ï¼šnodejs

```shell
cd webrtc/signaling_server/nodejs
# å®‰è£…nodejs, npm
sudo apt install nodejs npm
# å®‰è£…ä¾èµ–
npm install 
```

æ–¹æ³•2ï¼špython3

```shell
cd webrtc/signaling_server/python3
# å®‰è£…python3, pip3
sudo apt install python3 python3-pip
pip3 install -r requirements.txt
```

##### å¯åŠ¨ä¿¡ä»¤æœåŠ¡å™¨

```shel
chmod +x ./install && ./install
```

> é»˜è®¤ç«¯å£æ˜¯8000, è®°å¾—æœåŠ¡å™¨å…è®¸é˜²ç«å¢™TCP:8000ç«¯å£æµé‡é€šè¿‡ã€‚
> å¦‚æœfy403.cn:8000è¿˜èƒ½ç”¨ï¼Œé‚£ä¹ˆå°±ä¸ç”¨æ­å»ºä¿¡ä»¤æœåŠ¡å™¨äº†ã€‚ç›´æ¥ç”¨æˆ‘çš„å°±è¡Œï¼Œä½†æ˜¯è®°ä½ä¸€å®šè¦é…ç½®å”¯ä¸€çš„`CLIENT_ID="cam_id_YvgpEqD4" # å®¢æˆ·ç«¯ID`ã€‚ã€å¦‚æœå†²çªï¼Œè¯·è‡ªè¡Œä¿®æ”¹ã€‘

#### 1.2 æœåŠ¡å™¨éƒ¨åˆ†ï¼šSTUN/TURNæœåŠ¡å™¨å‡†å¤‡ï¼ˆè°ƒè¯•æ—¶å¯ç”¨æˆ‘æ­å»ºçš„, é»˜è®¤åŒ…å«åœ¨é…ç½®ä¸­))

STUN/TRUNæœåŠ¡å™¨æ˜¯ç”¨æ¥è·å–WebRTCåŒæ–¹çš„ç½‘ç»œåœ°å€ä¿¡æ¯ï¼šæœ¬åœ°æ¥å£ç›´æ¥åœ°å€ï¼ˆHost Candidateï¼‰ã€STUNæœåŠ¡å™¨åå°„åœ°å€ï¼ˆServer Reflexive Candidateï¼‰ä»¥åŠTURNä¸­ç»§åœ°å€ï¼ˆRelayed Candidateï¼‰ã€‚é€šå¸¸å†…ç½‘åœ°å€ä¼˜å…ˆçº§ä½äºå…¬ç½‘ç›´è¿åœ°å€ã€‚å¦‚æœå†…ç½‘ä¸èƒ½äº’é€šåˆ™èµ°ä¸­çº§TURNæœåŠ¡å™¨ï¼Œæµåª’ä½“æµé‡ä»TURNè½¬å‘ã€‚

å…¬å¼€çš„STUNæœåŠ¡å™¨éå¸¸å¤šï¼Œæ¯”å¦‚ï¼š(stun_host=â€˜stun.l.google.comâ€™, stun_port=19302)ã€‚

TURNæœåŠ¡å™¨å¯ä»¥è‡ªå·±æ­å»º[æ­å»ºç§æœ‰TURNæœåŠ¡å™¨](turn_server/README.md)ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨cloudflareå…è´¹æä¾›çš„æœåŠ¡å™¨ï¼ˆä½†æ˜¯å»¶è¿Ÿä¼šæ¯”è¾ƒå¤§ï¼Œä¸”ä¸ç¨³å®šï¼‰ã€‚å…·ä½“å¯ä»¥å‚è€ƒè¿™ç¯‡Blog[ã€WebRTCå…¨æµç¨‹ã€‘livekité…ç½®å…è´¹çš„cloudflare turnæœåŠ¡ - PiDan! | è™šæ‹Ÿä¸–ç•Œçš„æ‡’çŒ«çš„åšå®¢](https://pidan.dev/20250722/webrtc-livekit-deploy-config-turn-server/)

ç”³è¯·åï¼Œåªéœ€è¦é€šè¿‡ä»–æä¾›çš„ä¸€ä¸ªcmdå‘½ä»¤curlè·å–TURN server hostå’Œusernameï¼Œpasswordå°±è¡Œã€‚

#### 1.3 æ§åˆ¶æ¿éƒ¨åˆ†(Dockerä¸€é”®å®‰è£…)
> è¯¦ç»†ç»†èŠ‚è¯·æŸ¥çœ‹[Detail](README-Detail.md)


### å®‰è£…å¯åŠ¨

```shell

#1. ä½¿ç”¨æ ¹ç›®å½•æ„å»º
./build-all.sh

#2. è¿è¡Œ av_track
pushd av_track
./run-docker.sh

# æˆ–è€…ä½¿ç”¨è‡ªå®šä¹‰å‚æ•°è¿è¡Œ
./run-docker.sh --device /dev/video0 --name cam_001 --client-id cam_001

#3. è¿è¡Œ data_track
popd
pushd data_track
./run-docker.sh

# æˆ–è€…ä½¿ç”¨è‡ªå®šä¹‰ä¸²å£
./run-docker.sh --motor-port /dev/ttyUSB1 --gsm-port /dev/ttyACM1 --name data_001
popd
```

## QQç¾¤äº¤æµ

<img src="README.assets\qrcode_1764133405428.jpg" alt="qrcode_1764133405428" style="zoom: 50%;" />
